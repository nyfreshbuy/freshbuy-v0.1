<!-- frontend/admin/packing.html -->
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>é…è´§æ‰¹æ¬¡ - åœ¨é²œè´­æ‹¼å¥½è´§åå°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- âœ… ç»Ÿä¸€åå°æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/admin.css" />

    <style>
      .muted { color:#94a3b8; font-size:12px; }
      .row { display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
      .badge {
        display:inline-flex; align-items:center; gap:6px;
        padding:4px 10px; border-radius:999px;
        border:1px solid rgba(148,163,184,.35);
        background: rgba(15,23,42,.35);
        color:#e5e7eb; font-size:12px;
      }
      .grid-2 { display:grid; grid-template-columns: 2fr 1fr; gap:12px; }
      @media (max-width: 1100px){ .grid-2 { grid-template-columns:1fr; } }

      .picklist-table td, .picklist-table th { font-size: 12px; }
      .pill {
        display:inline-flex; padding:2px 8px; border-radius:999px; font-size:11px;
        background: rgba(56,189,248,.12); color:#38bdf8;
      }
      .pill.success { background: rgba(16,185,129,.12); color:#34d399; }
      .pill.warn { background: rgba(245,158,11,.12); color:#fbbf24; }

      .addr { max-width: 520px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .kpi { font-weight: 700; color:#a5b4fc; }

      /* âœ… å¯é€‰ï¼šé¡ºåºåˆ—æ ·å¼ï¼ˆå¦‚æœä½ åé¢åœ¨è¡¨æ ¼é‡ŒåŠ â€œé¡ºåºâ€åˆ—ï¼‰ */
      .route-seq-cell {
        font-weight: 800;
        color: #e5e7eb;
      }
    </style>
  </head>

  <body data-page="packing">
    <div class="admin-layout">
      <!-- å·¦ä¾§ä¾§è¾¹æ  -->
      <aside class="admin-sidebar">
        <div id="adminSidebar"></div>
      </aside>

      <!-- å³ä¾§ä¸»åŒºåŸŸ -->
      <div class="admin-main">
        <header class="admin-topbar">
          <button class="admin-btn admin-btn-ghost admin-topbar-toggle" data-toggle-sidebar>
            â˜°
          </button>
          <div class="admin-topbar-title">é…è´§æ‰¹æ¬¡</div>
          <div class="admin-topbar-spacer"></div>

          <div class="admin-user">
            <div class="admin-user-avatar">A</div>
            <div class="admin-user-info">
              <span class="admin-user-name">Admin</span>
              <span class="admin-user-role">è¶…çº§ç®¡ç†å‘˜</span>
            </div>
          </div>
        </header>

        <main class="admin-content">
          <div class="admin-page-header">
            <div>
              <div class="admin-page-title">
                é…è´§å• / æ‰¹æ¬¡ï¼š<span id="batchIdText">-</span>
              </div>
              <div class="admin-breadcrumb">åå° &gt; è®¢å•ç®¡ç† &gt; é…è´§æ‰¹æ¬¡</div>
              <div class="muted" id="batchHint">ä» /api/admin/orders/by-batch æ‹‰å–è®¢å•</div>
            </div>

            <div class="admin-page-actions">
              <button class="admin-btn admin-btn-ghost" id="btnBack">â† è¿”å›è®¢å•é¡µ</button>
              <button class="admin-btn admin-btn-ghost" id="btnRefresh">âŸ³ åˆ·æ–°</button>

              <!-- âœ… æ–°å¢ï¼šæ™ºèƒ½æ’åº(è·¯çº¿) + æ‰“å°è®¢å•è¯¦æƒ… -->
              <button class="admin-btn admin-btn-ghost" id="btnSmartRoute">ğŸ§­ æ™ºèƒ½æ’åº(è·¯çº¿)</button>
              <button class="admin-btn admin-btn-secondary" id="btnPrintOrderDetails">ğŸ§¾ æ‰“å°è®¢å•è¯¦æƒ…</button>

              <button class="admin-btn admin-btn-secondary" id="btnPrintPicklist">ğŸ§¾ æ‰“å°é…è´§æ±‡æ€»</button>
              <button class="admin-btn admin-btn-secondary" id="btnPrintLabelsAll">ğŸ·ï¸ æ‰“å°å…¨éƒ¨è´´çº¸</button>
              <button class="admin-btn admin-btn-primary" id="btnPrintLabelsSelected">âœ… æ‰“å°å‹¾é€‰è´´çº¸</button>
            </div>
          </div>

          <section class="admin-card admin-card-ghost">
            <div class="row">
              <span class="badge">è®¢å•æ•°ï¼š<span class="kpi" id="kpiOrders">0</span></span>
              <span class="badge">GMVï¼š<span class="kpi" id="kpiGMV">$0.00</span></span>
              <span class="badge">æ‰¹æ¬¡çŠ¶æ€ï¼š<span class="kpi" id="kpiStatus">-</span></span>

              <div style="flex:1"></div>

              <select id="driverSelect" class="admin-input" style="min-width:220px">
                <option value="">é€‰æ‹©å¸æœºï¼ˆæ‰¹é‡æ´¾å•ï¼‰</option>
              </select>

              <input id="deliveryDate" type="date" class="admin-input" style="width: 160px" />

              <button class="admin-btn admin-btn-primary" id="btnAssignDriver">
                ğŸšš æ‰¹é‡æ´¾å•ï¼ˆå‹¾é€‰ï¼‰
              </button>
            </div>
            <div class="muted" style="margin-top:6px">
              è¯´æ˜ï¼šæ‰¹é‡æ´¾å•ä¼šè°ƒç”¨ <code>PATCH /api/admin/orders/assign-driver</code>ï¼Œå¹¶æŠŠè®¢å•çŠ¶æ€æ”¹ä¸ºé…é€ä¸­ã€‚
            </div>
          </section>

          <div class="grid-2" style="margin-top:12px">
            <!-- å·¦ï¼šè®¢å•åˆ—è¡¨ -->
            <section class="admin-table-card">
              <div class="admin-card-header">
                <div>
                  <div class="admin-card-header-title">æ‰¹æ¬¡è®¢å•</div>
                  <div class="admin-card-header-sub muted">
                    å¯å‹¾é€‰è®¢å•æ‰¹é‡æ‰“å°è´´çº¸/æ´¾å•
                  </div>
                </div>

                <div class="muted" id="ordersMeta">-</div>
              </div>

              <div class="admin-table-wrapper">
                <table class="admin-table" id="ordersTable">
                  <thead>
                    <tr>
                      <th style="width:46px">
                        <input type="checkbox" id="checkAll" />
                      </th>
                      <th style="width:90px">çŠ¶æ€</th>

                      <!-- âœ… å¯é€‰ï¼šé¡ºåºåˆ—ï¼ˆå¦‚æœä½ æ„¿æ„åœ¨åˆ—è¡¨ä¹Ÿæ˜¾ç¤º routeSeqï¼Œå°±æ‰“å¼€è¿™åˆ—ï¼‰
                           ä½ ç›®å‰ packing.js è¿˜æ²¡æ¸²æŸ“è¿™åˆ—ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆä¸åŠ ï¼Œé¿å…åˆ—æ•°ä¸åŒ¹é…ã€‚
                           å¦‚æœä½ æƒ³åŠ ï¼šå–æ¶ˆä¸‹é¢æ³¨é‡Šï¼Œå¹¶æŠŠ tbody colspan æ”¹ä¸º 8ï¼ŒåŒæ—¶ packing.js æ¸²æŸ“åŠ ä¸€åˆ—å³å¯ã€‚
                      -->
                      <!-- <th style="width:70px">é¡ºåº</th> -->

                      <th style="width:170px">è®¢å•å·</th>
                      <th>å®¢æˆ·</th>
                      <th>åœ°å€/è‡ªæç‚¹</th>
                      <th style="width:90px">é‡‘é¢</th>
                      <th style="width:120px">é…é€æ–¹å¼</th>
                    </tr>
                  </thead>
                  <tbody id="ordersTbody">
                    <tr><td colspan="7">æ­£åœ¨åŠ è½½...</td></tr>
                  </tbody>
                </table>
              </div>
            </section>

            <!-- å³ï¼šé…è´§æ±‡æ€» -->
            <section class="admin-table-card">
              <div class="admin-card-header">
                <div>
                  <div class="admin-card-header-title">é…è´§æ±‡æ€»ï¼ˆPicklistï¼‰</div>
                  <div class="admin-card-header-sub muted">
                    è‡ªåŠ¨æŒ‰å•†å“æ±‡æ€»æ•°é‡ï¼ˆä»…ç”¨äºé…è´§å‚è€ƒï¼‰
                  </div>
                </div>
              </div>

              <div class="admin-table-wrapper">
                <table class="admin-table picklist-table">
                  <thead>
                    <tr>
                      <th>å•†å“</th>
                      <th style="width:70px">æ•°é‡</th>
                      <th style="width:120px">SKU</th>
                    </tr>
                  </thead>
                  <tbody id="picklistTbody">
                    <tr><td colspan="3">ç­‰å¾…åŠ è½½è®¢å•åç”Ÿæˆ...</td></tr>
                  </tbody>
                </table>
              </div>
            </section>
          </div>
        </main>
      </div>
    </div>

    <!-- âœ… å®ˆå« + sidebar -->
    <script src="/admin/assets/js/admin_guard.js"></script>
    <script src="/admin/assets/js/admin_sidebar.js"></script>

    <!-- âœ… æœ¬é¡µé€»è¾‘ -->
    <script src="/admin/assets/js/packing.js"></script>
  </body>
</html>
