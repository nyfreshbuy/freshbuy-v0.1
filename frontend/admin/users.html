<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ç”¨æˆ·ç®¡ç† - Freshbuy Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- å¦‚æœä½ åŸæ¥æœ‰ admin.cssï¼Œå¯ä»¥ä¿ç•™è¿™ä¸€è¡Œ -->
    <link rel="stylesheet" href="assets/css/admin.css" />

    <style>
      /* ===== æ•´ä½“æ·±è‰²åå°é£æ ¼ï¼ˆç±»ä¼¼ä½ æˆªå›¾ï¼‰ ===== */
      :root {
        --bg-main: #020617;
        --bg-elevated: rgba(15, 23, 42, 0.96);
        --bg-elevated-soft: rgba(15, 23, 42, 0.9);
        --accent: #3b82f6;
        --accent-soft: rgba(59, 130, 246, 0.12);
        --accent-green: #22c55e;
        --accent-yellow: #facc15;
        --border-subtle: rgba(148, 163, 184, 0.4);
        --text-main: #e5e7eb;
        --text-sub: #9ca3af;
        --radius-lg: 20px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: radial-gradient(circle at top left, #0f172a 0, #020617 55%);
        color: var(--text-main);
        -webkit-font-smoothing: antialiased;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      /* ===== å¸ƒå±€ï¼šå·¦ä¾§ä¾§è¾¹æ  + å³ä¾§ä¸»å†…å®¹ ===== */
      .admin-layout {
        display: flex;
        min-height: 100vh;
      }

      .admin-sidebar {
        width: 240px;
        background: radial-gradient(
          circle at top left,
          #020617 0,
          #020617 30%,
          #020617 100%
        );
        border-right: 1px solid rgba(15, 23, 42, 0.9);
        padding: 18px 18px 24px;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      .sidebar-logo {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 4px 6px;
      }

      .sidebar-logo-badge {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 0, #3b82f6 0, #1d4ed8 45%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #e5f2ff;
        font-weight: 700;
        font-size: 18px;
      }

      .sidebar-logo-text {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .sidebar-logo-text-main {
        font-size: 16px;
        font-weight: 600;
      }

      .sidebar-logo-text-sub {
        font-size: 11px;
        color: var(--text-sub);
      }

      .sidebar-section-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: rgba(148, 163, 184, 0.9);
        margin: 8px 6px 4px;
      }

      .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .sidebar-link {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        margin: 0 4px;
        border-radius: 999px;
        font-size: 14px;
        color: #e5e7eb;
        opacity: 0.8;
        transition: 0.15s ease;
      }

      .sidebar-link span.icon-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.6);
      }

      .sidebar-link:hover {
        background: rgba(15, 23, 42, 0.85);
        opacity: 1;
      }

      .sidebar-link.active {
        background: radial-gradient(circle at top left, #1d4ed8 0, #020617 80%);
        opacity: 1;
        box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.5);
      }

      .sidebar-footer {
        margin-top: auto;
        padding-top: 10px;
        border-top: 1px solid rgba(15, 23, 42, 0.9);
        font-size: 11px;
        color: rgba(148, 163, 184, 0.85);
      }

      /* ===== å³ä¾§ä¸»å†…å®¹ ===== */
      .admin-main {
        flex: 1;
        padding: 18px 26px 26px;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      .main-topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }

      .main-title-block {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .main-title {
        font-size: 22px;
        font-weight: 600;
      }

      .main-subtitle {
        font-size: 13px;
        color: var(--text-sub);
      }

      .main-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .search-input {
        background: rgba(15, 23, 42, 0.9);
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        padding: 6px 12px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .search-input input {
        background: transparent;
        border: none;
        outline: none;
        color: var(--text-main);
        font-size: 13px;
        width: 180px;
      }

      .search-input input::placeholder {
        color: rgba(148, 163, 184, 0.75);
      }

      .btn-pill {
        border-radius: 999px;
        padding: 6px 14px;
        font-size: 13px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.9);
        color: var(--text-main);
        cursor: pointer;
      }

      .btn-primary {
        border-radius: 999px;
        padding: 6px 16px;
        font-size: 13px;
        border: none;
        cursor: pointer;
        background: linear-gradient(to right, #3b82f6, #2563eb);
        color: white;
        box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.4),
          0 10px 30px rgba(15, 23, 42, 0.9);
      }

      .btn-primary:hover {
        filter: brightness(1.05);
      }

      /* ===== å†…å®¹åŒºåŸŸå¡ç‰‡ ===== */
      .content-grid {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .card {
        background: var(--bg-elevated-soft);
        border-radius: var(--radius-lg);
        border: 1px solid rgba(15, 23, 42, 0.95);
        box-shadow: 0 18px 45px rgba(15, 23, 42, 0.9);
        padding: 18px 18px 16px;
      }

      .card-header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .card-title-block {
        display: flex;
        flex-direction: column;
        gap: 3px;
      }

      .card-title {
        font-size: 16px;
        font-weight: 600;
      }

      .card-subtitle {
        font-size: 12px;
        color: var(--text-sub);
      }

      .pill-soft {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 11px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.35);
        color: rgba(148, 163, 184, 0.9);
      }

      .filters-row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .input-dark {
        background: rgba(15, 23, 42, 0.9);
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        padding: 6px 12px;
        font-size: 13px;
        color: var(--text-main);
        min-width: 150px;
        outline: none;
      }

      .input-dark::placeholder {
        color: rgba(148, 163, 184, 0.75);
      }

      /* ===== è¡¨æ ¼ ===== */
      .table-wrapper {
        margin-top: 6px;
        border-radius: 18px;
        border: 1px solid rgba(15, 23, 42, 0.95);
        overflow: hidden;
        background: radial-gradient(
          circle at top left,
          rgba(15, 23, 42, 0.95) 0,
          rgba(15, 23, 42, 1) 40%
        );
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
      }

      thead {
        background: radial-gradient(
          circle at top left,
          rgba(37, 99, 235, 0.35) 0,
          rgba(15, 23, 42, 0.98) 45%
        );
      }

      th,
      td {
        padding: 10px 14px;
        text-align: left;
      }

      th {
        font-weight: 500;
        color: rgba(226, 232, 240, 0.95);
        border-bottom: 1px solid rgba(30, 64, 175, 0.75);
      }

      tbody tr:nth-child(even) td {
        background: rgba(15, 23, 42, 0.96);
      }

      tbody tr:nth-child(odd) td {
        background: rgba(15, 23, 42, 0.99);
      }

      tbody tr:hover td {
        background: rgba(30, 64, 175, 0.45);
      }

      .badge-role {
        padding: 2px 8px;
        border-radius: 999px;
        font-size: 11px;
        border: 1px solid rgba(148, 163, 184, 0.5);
      }

      .badge-role.leader {
        border-color: rgba(52, 211, 153, 0.7);
        color: #a7f3d0;
        background: rgba(22, 163, 74, 0.15);
      }

      .badge-role.driver {
        border-color: rgba(59, 130, 246, 0.7);
        color: #bfdbfe;
        background: rgba(37, 99, 235, 0.16);
      }

      .badge-role.admin {
        border-color: rgba(249, 115, 22, 0.8);
        color: #fed7aa;
        background: rgba(248, 113, 22, 0.14);
      }

      .status-pill {
        padding: 2px 10px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 500;
      }

      .status-pill.active {
        background: rgba(34, 197, 94, 0.24);
        color: #bbf7d0;
      }

      .status-pill.disabled {
        background: rgba(148, 163, 184, 0.25);
        color: #e5e7eb;
      }

      .link-btn {
        background: none;
        border: none;
        color: #60a5fa;
        cursor: pointer;
        padding: 4px 4px;
        font-size: 12px;
      }

      .link-btn + .link-btn {
        margin-left: 4px;
      }

      /* ===== åˆ†é¡µ ===== */
      .pagination {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 8px;
        padding: 10px 4px 4px;
        font-size: 12px;
      }

      .pager-btn {
        border-radius: 999px;
        padding: 3px 9px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        background: rgba(15, 23, 42, 0.9);
        color: var(--text-main);
        cursor: pointer;
      }

      .pager-btn:disabled {
        opacity: 0.4;
        cursor: default;
      }

      /* ===== å¼¹çª—ï¼ˆæ²¿ç”¨æ·±è‰²é£æ ¼ï¼‰ ===== */
      .modal {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.75);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
      }

      .modal.open {
        display: flex;
      }

      .modal-content {
        width: 380px;
        background: radial-gradient(
          circle at top left,
          rgba(30, 64, 175, 0.9) 0,
          #020617 65%
        );
        border-radius: 22px;
        border: 1px solid rgba(37, 99, 235, 0.65);
        box-shadow: 0 20px 50px rgba(15, 23, 42, 0.95);
        padding: 18px 20px 16px;
      }

      .modal-title {
        margin: 0 0 10px;
        font-size: 16px;
        font-weight: 600;
      }

      .field {
        display: flex;
        flex-direction: column;
        margin-bottom: 12px;
        font-size: 13px;
      }

      .field span {
        margin-bottom: 4px;
        color: var(--text-sub);
      }

      .field .input-dark {
        border-radius: 10px;
        width: 100%;
      }

      .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 6px;
      }
    </style>
  </head>

  <body>
    <div class="admin-layout">
      <!-- ä¾§è¾¹æ  -->
      <aside class="admin-sidebar">
      <!-- âœ… ç»Ÿä¸€ sidebarï¼šç”± /admin/assets/js/admin_sidebar.js æ³¨å…¥ -->
      <div id="adminSidebar"></div>
    </aside>
      <!-- ä¸»å†…å®¹ -->
      <main class="admin-main">
        <!-- é¡¶éƒ¨æ¡ -->
        <div class="main-topbar">
          <div class="main-title-block">
            <div class="main-title">ç”¨æˆ·ç®¡ç†</div>
            <div class="main-subtitle">
              æŸ¥çœ‹å¹¶ç®¡ç†åå°ç”¨æˆ· / å›¢é•¿ / å¸æœº / æ™®é€šå®¢æˆ·
            </div>
          </div>
          <div class="main-actions">
            <div class="search-input">
              <span style="font-size: 13px; color: #64748b">ğŸ”</span>
              <input
                type="text"
                placeholder="æœç´¢è®¢å• / ç”¨æˆ· / å•†å“..."
              />
            </div>
            <button class="btn-pill" id="refreshBtn">åˆ·æ–°æ•°æ®</button>
          </div>
        </div>

        <!-- å†…å®¹åŒº -->
        <div class="content-grid">
          <!-- ç­›é€‰å¡ç‰‡ -->
          <section class="card">
            <div class="card-header-row">
              <div class="card-title-block">
                <div class="card-title">ç­›é€‰ç”¨æˆ·</div>
                <div class="card-subtitle">
                  æ”¯æŒæŒ‰è§’è‰² / çŠ¶æ€ / å…³é”®è¯å¿«é€ŸæŸ¥è¯¢
                </div>
              </div>
              <div class="pill-soft">æœ¬é¡µæ•°æ®æ¥è‡ªå†…å­˜ Â· ä»…æµ‹è¯•ä½¿ç”¨</div>
            </div>

            <div class="filters-row">
              <input
                id="keyword"
                type="text"
                class="input-dark"
                placeholder="æŒ‰å§“å / æ‰‹æœºæœç´¢"
              />

              <select id="roleFilter" class="input-dark">
                <option value="">å…¨éƒ¨è§’è‰²</option>
                <option value="customer">æ™®é€šç”¨æˆ·</option>
                <option value="leader">å›¢é•¿</option>
                <option value="driver">å¸æœº</option>
                <option value="admin">ç®¡ç†å‘˜</option>
              </select>

              <select id="statusFilter" class="input-dark">
                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                <option value="active">æ­£å¸¸</option>
                <option value="disabled">ç¦ç”¨</option>
              </select>

              <button id="searchBtn" class="btn-primary">æœç´¢</button>
              <button class="btn btn-outline" id="btnCreateUser">ï¼‹ åˆ›å»ºç”¨æˆ·</button>
            </div>
          </section>

          <!-- ç”¨æˆ·åˆ—è¡¨å¡ç‰‡ -->
          <section class="card">
            <div class="card-header-row">
              <div class="card-title-block">
                <div class="card-title">ç”¨æˆ·åˆ—è¡¨</div>
                <div class="card-subtitle">
                  å¯æŸ¥çœ‹æœ€è¿‘æ³¨å†Œç”¨æˆ·ã€å›¢é•¿ã€å¸æœºç­‰ä¿¡æ¯
                </div>
              </div>
            </div>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>å§“å</th>
                    <th>æ‰‹æœºå·</th>
                    <th>è§’è‰²</th>
                    <th>çŠ¶æ€</th>
                    <th>è®¢å•æ•°</th>
                    <th>ç´¯è®¡æ¶ˆè´¹</th>
                    <th>æ³¨å†Œæ—¶é—´</th>
                    <th>æ“ä½œ</th>
                  </tr>
                </thead>
                <tbody id="userTableBody"></tbody>
              </table>
            </div>

            <div id="pagination" class="pagination"></div>
          </section>
        </div>
      </main>
    </div>

    <!-- ç¼–è¾‘å¼¹çª— -->
    <div class="modal" id="editModal">
      <div class="modal-content">
        <h2 class="modal-title">ç¼–è¾‘ç”¨æˆ·</h2>

        <label class="field">
          <span>å§“å</span>
          <input id="editName" type="text" class="input-dark" />
        </label>

        <label class="field">
          <span>æ‰‹æœºå·</span>
          <input id="editPhone" type="text" class="input-dark" />
        </label>

        <label class="field">
          <span>è§’è‰²</span>
          <select id="editRole" class="input-dark">
            <option value="customer">æ™®é€šç”¨æˆ·</option>
            <option value="leader">å›¢é•¿</option>
            <option value="driver">å¸æœº</option>
            <option value="admin">ç®¡ç†å‘˜</option>
          </select>
        </label>

        <label class="field">
          <span>çŠ¶æ€</span>
          <select id="editStatus" class="input-dark">
            <option value="active">æ­£å¸¸</option>
            <option value="disabled">ç¦ç”¨</option>
          </select>
        </label>

        <div class="modal-actions">
          <button id="cancelEditBtn" class="btn-pill">å–æ¶ˆ</button>
          <button id="saveUserBtn" class="btn-primary">ä¿å­˜</button>
        </div>
      </div>
    </div>
<!-- åˆ›å»ºç”¨æˆ·å¼¹çª—ï¼ˆâœ… å¤ç”¨ editModal çš„ modal-content æ ·å¼ï¼‰ -->
<div class="modal" id="createModal">
  <div class="modal-content">
    <h2 class="modal-title">åˆ›å»ºç”¨æˆ·</h2>

    <label class="field">
      <span>å§“å</span>
      <input id="createName" type="text" class="input-dark" placeholder="å¦‚ï¼šlinqi dai" />
    </label>

    <label class="field">
      <span>æ‰‹æœºå·</span>
      <input id="createPhone" type="text" class="input-dark" placeholder="10ä½æ‰‹æœºå·ï¼ˆä»…æ•°å­—ï¼‰" />
    </label>

    <label class="field">
      <span>è§’è‰²</span>
      <select id="createRole" class="input-dark">
        <option value="customer">æ™®é€šç”¨æˆ·</option>
        <option value="leader">å›¢é•¿</option>
        <option value="driver">å¸æœº</option>
        <option value="admin">ç®¡ç†å‘˜</option>
      </select>
    </label>

    <label class="field">
      <span>çŠ¶æ€</span>
      <select id="createStatus" class="input-dark">
        <option value="active">æ­£å¸¸</option>
        <option value="disabled">ç¦ç”¨</option>
      </select>
    </label>

    <label class="field">
      <span>åˆå§‹å¯†ç ï¼ˆå¯é€‰ï¼‰</span>
      <input id="createPassword" type="text" class="input-dark" placeholder="ç•™ç©ºåˆ™ç³»ç»Ÿç”Ÿæˆ" />
    </label>

    <div id="createHint" style="display:none; margin-top:8px; color:#bbf7d0; font-size:12px;"></div>

    <div class="modal-actions">
      <button id="cancelCreateBtn" class="btn-pill">å–æ¶ˆ</button>
      <button id="createUserBtn" class="btn-primary">åˆ›å»º</button>
    </div>
  </div>
</div>
<script src="/admin/assets/js/admin_guard.js"></script>
<script src="./assets/js/admin_auth_ui.js"></script>  
<!-- åŠŸèƒ½è„šæœ¬ï¼ˆæ²¿ç”¨ä½ ç°åœ¨çš„ users.jsï¼‰ -->
    <script src="users.js"></script>
   <!-- âœ… ç»Ÿä¸€ sidebar æ³¨å…¥è„šæœ¬ï¼ˆå¿…é¡»åŠ ï¼‰ -->
    <script src="/admin/assets/js/admin_sidebar.js"></script>  
  </body>
</html>
