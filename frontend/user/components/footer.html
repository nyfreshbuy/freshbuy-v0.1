<footer class="freshbuy-footer">
  <div class="footer-inner">
    <!-- 品牌介绍 -->
    <div class="footer-brand">
      <div class="footer-logo">Freshbuy</div>
      <div class="footer-sub">
        在鲜购拼好货 · New York Local Grocery Delivery
      </div>

      <button class="footer-btn" id="openDeliveryModal" type="button">
        配送说明 / 运费规则
        <span class="footer-btn-sub">Delivery & Shipping Rules</span>
      </button>
    </div>

    <!-- ✅ 配送信息（可被后台配置动态更新） -->
    <div class="footer-delivery">
  <div class="footer-section-title">配送信息</div>

  <div class="footer-text">
    <strong>配送范围：</strong><br />
    <span id="fbAreaZh">Fresh Meadows 及周边社区</span><br />
    <span class="muted">（<span id="fbAreaNoteZh">以可下单区域为准</span>）</span>
  </div>

  <div class="footer-text">
    <strong>配送时间：</strong><br />
    <span id="fbFreqZh">每周固定配送 1 次</span><br />
    <span id="fbDayZh">周五</span>
    <span id="fbTimeZh">17:00 – 21:00（纽约时间）</span>
  </div>

  <div class="footer-text footer-en">
    <strong>Delivery Area:</strong><br />
    <span id="fbAreaEn">Fresh Meadows and nearby neighborhoods</span><br />
    <span class="muted">(<span id="fbAreaNoteEn">subject to available service areas</span>)</span>
  </div>

  <div class="footer-text footer-en">
    <strong>Delivery Time:</strong><br />
    <span id="fbFreqEn">Scheduled delivery once per week</span><br />
    <span id="fbDayEn">Friday</span>
    <span id="fbTimeEn">5:00 PM – 9:00 PM (NY time)</span>
  </div>
</div>
    <!-- 法律 & 帮助链接 -->
    <div class="footer-links">
      <a href="/user/about.html">关于我们<br /><span>About Us</span></a>
      <a href="/user/privacy.html">隐私政策<br /><span>Privacy Policy</span></a>
      <a href="/user/refund.html">退款政策<br /><span>Refund Policy</span></a>
      <a href="/user/support.html">联系客服<br /><span>Contact Us</span></a>
    </div>
  </div>

  <div class="footer-bottom">
    © <span id="footerYear"></span> Freshbuy · 在鲜购拼好货 · New York
    <div class="footer-test-hint">Freshbuy is currently in testing phase.</div>
  </div>
</footer>

<!-- ✅ 弹窗：配送说明 / 运费规则 -->
<div class="fb-modal" id="deliveryModal" aria-hidden="true">
  <div class="fb-modal-backdrop" data-close="true"></div>

  <div
    class="fb-modal-dialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="fbModalTitle"
  >
    <div class="fb-modal-header">
      <div>
        <div class="fb-modal-title" id="fbModalTitle">配送说明 / 运费规则</div>
        <div class="fb-modal-sub">Delivery & Shipping Rules</div>
      </div>

      <button
        class="fb-modal-close"
        id="closeDeliveryModal"
        type="button"
        aria-label="Close"
      >
        ✕
      </button>
    </div>

    <div class="fb-modal-body">
      <!-- 中文 -->
      <div class="fb-block">
        <div class="fb-block-title">中文说明</div>

        <div class="fb-card">
          <div class="fb-card-title">配送方式（当前试运营）</div>
          <ul class="fb-list">
            <li><strong>爆品日：</strong>仅限爆品商品，集中配送。</li>
            <li><strong>区域团：</strong>爆品 + 非爆品一起下单，按区域集中配送。</li>
            <li><strong>次日配送：</strong>普通商品配送（以页面显示为准）。</li>
          </ul>
          <div class="fb-note">注：最终以结算页显示的配送方式与费用为准。</div>
        </div>

        <div class="fb-card">
          <div class="fb-card-title">运费规则（示例，可随时调整）</div>
          <ul class="fb-list">
            <li><strong>标准运费：</strong>$4.99 / 单</li>
            <li><strong>满额免运：</strong>订单金额 ≥ $49.99 可免运（如页面显示）</li>
            <li><strong>好友拼单：</strong>可与好友分摊运费（以活动规则为准）</li>
          </ul>
          <div class="fb-note">试运营阶段规则可能会更新，我们会在页面及时提示。</div>
        </div>

        <div class="fb-card">
          <div class="fb-card-title">配送时间</div>
          <ul class="fb-list">
            <li><strong>固定配送：</strong>每周 1 次</li>
            <li><strong>时间段：</strong>周五 17:00 – 21:00（纽约时间）</li>
          </ul>
        </div>
      </div>

      <!-- English -->
      <div class="fb-block">
        <div class="fb-block-title">English</div>

        <div class="fb-card">
          <div class="fb-card-title">Delivery Modes (Testing Phase)</div>
          <ul class="fb-list">
            <li><strong>Deals Day:</strong> deals-only items, consolidated delivery.</li>
            <li><strong>Regional Group:</strong> mixed items delivered by area in batches.</li>
            <li><strong>Next-Day:</strong> standard delivery (subject to checkout display).</li>
          </ul>
          <div class="fb-note">
            Final delivery method and fees are shown at checkout and may change during testing.
          </div>
        </div>

        <div class="fb-card">
          <div class="fb-card-title">Shipping Fee Rules (Example)</div>
          <ul class="fb-list">
            <li><strong>Standard fee:</strong> $4.99 per order</li>
            <li><strong>Free shipping:</strong> order subtotal ≥ $49.99 (if shown at checkout)</li>
            <li><strong>Friend Group:</strong> split shipping with friends (per promotion rules)</li>
          </ul>
          <div class="fb-note">
            Rules may be updated during testing and will be shown on the checkout page.
          </div>
        </div>

        <div class="fb-card">
          <div class="fb-card-title">Delivery Schedule</div>
          <ul class="fb-list">
            <li><strong>Frequency:</strong> once per week</li>
            <li><strong>Window:</strong> Friday 5:00 PM – 9:00 PM (NY time)</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="fb-modal-footer">
      <button class="fb-modal-ok" type="button" data-close="true">我知道了 / OK</button>
    </div>
  </div>
</div>

<style>
  /* ===== Footer ===== */
  .freshbuy-footer {
    margin-top: 48px;
    background: #020617;
    color: #e5e7eb;
    border-top: 1px solid rgba(148, 163, 184, 0.2);
  }

  .footer-inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: 28px 16px;
  display: grid;
  grid-template-columns: 1fr 420px; /* 左自适应 + 右固定 */
  gap: 32px;
  align-items: flex-start;
}

  .footer-brand {
    max-width: 320px;
  }

  .footer-logo {
    font-size: 20px;
    font-weight: 700;
    letter-spacing: 0.03em;
  }

  .footer-sub {
    font-size: 13px;
    color: #9ca3af;
    margin-top: 6px;
    line-height: 1.6;
  }

  .footer-btn {
    margin-top: 14px;
    width: 100%;
    text-align: left;
    border: 1px solid rgba(148, 163, 184, 0.35);
    background: rgba(15, 23, 42, 0.9);
    color: #e5e7eb;
    border-radius: 12px;
    padding: 10px 12px;
    cursor: pointer;
    font-size: 14px;
    line-height: 1.3;
  }

  .footer-btn-sub {
    display: block;
    margin-top: 4px;
    font-size: 12px;
    color: #9ca3af;
  }

  .footer-btn:hover {
    border-color: rgba(34, 197, 94, 0.6);
  }

  .footer-delivery {
    max-width: 320px;
    font-size: 13px;
  }

  .footer-section-title {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .footer-text {
    line-height: 1.6;
    margin-bottom: 10px;
  }

  .footer-en {
    color: #9ca3af;
    font-size: 12px;
  }

  .muted {
    color: #9ca3af;
    font-size: 12px;
  }

  .footer-links {
    display: grid;
    grid-template-columns: repeat(4, minmax(120px, 1fr));
    gap: 16px;
  }

  .footer-links a {
    color: #e5e7eb;
    text-decoration: none;
    font-size: 14px;
    line-height: 1.4;
  }

  .footer-links a span {
    font-size: 12px;
    color: #9ca3af;
  }

  .footer-links a:hover {
    color: #22c55e;
  }

  .footer-bottom {
    text-align: center;
    font-size: 12px;
    color: #9ca3af;
    padding: 14px 8px 18px;
    border-top: 1px solid rgba(148, 163, 184, 0.12);
  }

  .footer-test-hint {
    margin-top: 6px;
    font-size: 11px;
    color: #6b7280;
  }

  @media (max-width: 768px) {
    .footer-links {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* ===== Modal ===== */
  .fb-modal {
    position: fixed;
    inset: 0;
    display: none;
    z-index: 9999;
  }
  .fb-modal.show {
    display: block;
  }
  .fb-modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(2, 6, 23, 0.72);
    backdrop-filter: blur(2px);
  }
  .fb-modal-dialog {
    position: relative;
    max-width: 920px;
    margin: 6vh auto;
    background: rgba(15, 23, 42, 0.97);
    border: 1px solid rgba(148, 163, 184, 0.35);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
  }
  .fb-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 14px 14px;
    border-bottom: 1px solid rgba(148, 163, 184, 0.18);
  }
  .fb-modal-title {
    font-size: 16px;
    font-weight: 700;
  }
  .fb-modal-sub {
    font-size: 12px;
    color: #9ca3af;
    margin-top: 2px;
  }
  .fb-modal-close {
    border: 1px solid rgba(148, 163, 184, 0.35);
    background: rgba(2, 6, 23, 0.6);
    color: #e5e7eb;
    border-radius: 10px;
    padding: 8px 10px;
    cursor: pointer;
  }
  .fb-modal-close:hover {
    border-color: rgba(34, 197, 94, 0.6);
  }
  .fb-modal-body {
    padding: 14px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }
  .fb-block-title {
    font-size: 12px;
    color: #a5b4fc;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 8px;
  }
  .fb-card {
    background: rgba(2, 6, 23, 0.55);
    border: 1px solid rgba(148, 163, 184, 0.18);
    border-radius: 14px;
    padding: 12px;
    margin-bottom: 12px;
  }
  .fb-card-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 6px;
  }
  .fb-list {
    margin: 0;
    padding-left: 18px;
  }
  .fb-list li {
    font-size: 13px;
    line-height: 1.6;
    margin: 4px 0;
    color: #e5e7eb;
  }
  .fb-note {
    margin-top: 8px;
    font-size: 12px;
    color: #9ca3af;
    line-height: 1.5;
  }
  .fb-modal-footer {
    padding: 12px 14px 14px;
    border-top: 1px solid rgba(148, 163, 184, 0.18);
    display: flex;
    justify-content: flex-end;
  }
  .fb-modal-ok {
    border: 1px solid rgba(34, 197, 94, 0.6);
    background: rgba(34, 197, 94, 0.12);
    color: #e5e7eb;
    border-radius: 12px;
    padding: 10px 14px;
    cursor: pointer;
  }
  .fb-modal-ok:hover {
    background: rgba(34, 197, 94, 0.2);
  }

  @media (max-width: 860px) {
    .fb-modal-dialog {
      margin: 4vh 10px;
    }
    .fb-modal-body {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  (function () {
    // 弹窗
    const modal = document.getElementById("deliveryModal");
    const openBtn = document.getElementById("openDeliveryModal");
    const closeBtn = document.getElementById("closeDeliveryModal");

    function openModal() {
      if (!modal) return;
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeModal() {
      if (!modal) return;
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    openBtn && openBtn.addEventListener("click", openModal);
    closeBtn && closeBtn.addEventListener("click", closeModal);

    // 点击遮罩 / OK 关闭
    modal &&
      modal.addEventListener("click", (e) => {
        const t = e.target;
        if (t && t.getAttribute && t.getAttribute("data-close") === "true") {
          closeModal();
        }
      });

    // ESC 关闭
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal && modal.classList.contains("show")) {
        closeModal();
      }
    });
  })();
</script>
