<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>å¸æœºç«¯ - æˆ‘çš„é…é€å•</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg: #0b1220;
        --card: rgba(15, 23, 42, 0.9);
        --stroke: rgba(148, 163, 184, 0.35);
        --text: #e5e7eb;
        --muted: #94a3b8;
        --primary: #22c55e;
        --warn: #f59e0b;
        --danger: #ef4444;
        --accent: #38bdf8;
        --radius: 16px;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Noto Sans", sans-serif;
        background: radial-gradient(1200px 600px at 20% -20%, rgba(56,189,248,.18), transparent),
                    radial-gradient(900px 600px at 110% 10%, rgba(34,197,94,.18), transparent),
                    var(--bg);
        color: var(--text);
      }
      .wrap { max-width: 1100px; margin: 0 auto; padding: 18px 14px 50px; }
      .topbar {
        display: flex; gap: 10px; align-items: center; justify-content: space-between;
        padding: 14px; border: 1px solid var(--stroke); border-radius: var(--radius);
        background: rgba(2,6,23,.35); backdrop-filter: blur(10px);
        position: sticky; top: 0; z-index: 10;
      }
      .title { display: flex; flex-direction: column; gap: 2px; }
      .title h1 { margin: 0; font-size: 18px; }
      .title .sub { font-size: 12px; color: var(--muted); }
      .actions { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; justify-content:flex-end; }
      .btn {
        border: 1px solid var(--stroke);
        background: rgba(148,163,184,.12);
        color: var(--text);
        padding: 9px 12px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 13px;
      }
      .btn.primary { background: rgba(34,197,94,.20); border-color: rgba(34,197,94,.55); }
      .btn.ghost { background: transparent; }
      .btn.danger { background: rgba(239,68,68,.16); border-color: rgba(239,68,68,.45); }
      .btn:disabled { opacity: .5; cursor: not-allowed; }

      .panel {
        margin-top: 12px;
        border: 1px solid var(--stroke);
        border-radius: var(--radius);
        background: var(--card);
        padding: 12px;
      }
      .filters { display:flex; gap: 8px; flex-wrap: wrap; align-items:center; }
      .input, select {
        border: 1px solid var(--stroke);
        background: rgba(2,6,23,.35);
        color: var(--text);
        padding: 9px 10px;
        border-radius: 12px;
        font-size: 13px;
        outline: none;
      }
      .input { min-width: 220px; }

      .metaRow {
        display:flex; gap: 10px; flex-wrap: wrap; align-items:center; justify-content: space-between;
        margin-top: 10px;
        color: var(--muted);
        font-size: 12px;
      }
      .pill {
        display:inline-flex; align-items:center; gap: 6px;
        padding: 3px 10px; border-radius: 999px;
        border: 1px solid var(--stroke);
        background: rgba(148,163,184,.10);
        font-size: 12px;
        color: var(--text);
      }
      .pill.ok { border-color: rgba(34,197,94,.55); background: rgba(34,197,94,.16); }
      .pill.warn { border-color: rgba(245,158,11,.55); background: rgba(245,158,11,.16); }
      .pill.bad { border-color: rgba(239,68,68,.55); background: rgba(239,68,68,.16); }
      .pill.info { border-color: rgba(56,189,248,.55); background: rgba(56,189,248,.16); }

      .grid {
        margin-top: 12px;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 10px;
      }
      .card {
        grid-column: span 12;
        border: 1px solid var(--stroke);
        border-radius: var(--radius);
        background: rgba(2,6,23,.35);
        padding: 12px;
      }
      @media (min-width: 860px) {
        .card { grid-column: span 6; }
      }
      .row { display:flex; align-items: flex-start; justify-content: space-between; gap: 10px; }
      .left { display:flex; gap: 10px; align-items:flex-start; }
      .seq {
        width: 44px; height: 44px; border-radius: 999px;
        display:flex; align-items:center; justify-content:center;
        background: rgba(56,189,248,.16); color: var(--accent);
        font-weight: 900; font-size: 20px; flex: 0 0 auto;
        border: 1px solid rgba(56,189,248,.35);
      }
      .seq.empty { opacity:.35; }
      .main { display:flex; flex-direction:column; gap: 4px; }
      .oid { font-weight: 800; font-size: 14px; }
      .addr { color: var(--text); font-size: 13px; line-height: 1.25; }
      .muted { color: var(--muted); font-size: 12px; }
      .right { display:flex; flex-direction:column; gap: 8px; align-items:flex-end; }
      .btnrow { display:flex; gap: 8px; flex-wrap: wrap; justify-content:flex-end; }
      .detail {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px dashed rgba(148,163,184,.35);
        display: none;
      }
      .detail.active { display:block; }
      .items { margin-top: 8px; display:flex; flex-direction:column; gap: 6px; }
      .item { display:flex; justify-content: space-between; gap: 10px; font-size: 13px; }
      .hr { height:1px; background: rgba(148,163,184,.18); margin: 10px 0; }
      .toast {
        position: fixed; left: 50%; transform: translateX(-50%);
        bottom: 14px; z-index: 99;
        max-width: 92vw;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--stroke);
        background: rgba(2,6,23,.85);
        backdrop-filter: blur(10px);
        color: var(--text);
        font-size: 13px;
        display: none;
      }
      .toast.show { display:block; }
      code { color: #a5b4fc; }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="topbar">
        <div class="title">
          <h1>ğŸšš å¸æœºç«¯ Â· æˆ‘çš„é…é€å•</h1>
          <div class="sub" id="subTitle">åŠ è½½ä¸­...</div>
        </div>
        <div class="actions">
          <button class="btn ghost" id="btnLogout">é€€å‡ºç™»å½•</button>
          <button class="btn" id="btnTestToken">æ£€æŸ¥ Token</button>
          <button class="btn primary" id="btnRefresh">åˆ·æ–°è®¢å•</button>
        </div>
      </div>

      <div class="panel">
        <div class="filters">
          <input class="input" id="kw" placeholder="æœç´¢ï¼šè®¢å•å· / å§“å / æ‰‹æœº / åœ°å€" />
          <select id="status">
            <option value="">å…¨éƒ¨çŠ¶æ€</option>
            <option value="packing">é…è´§ä¸­</option>
            <option value="shipping">é…é€ä¸­</option>
            <option value="done">å·²å®Œæˆ</option>
            <option value="pending">å¾…ç¡®è®¤/å¾…æ”¯ä»˜</option>
            <option value="paid">å·²æ”¯ä»˜</option>
            <option value="cancelled">å·²å–æ¶ˆ</option>
          </select>
          <select id="scope">
            <option value="today">åªçœ‹ä»Šå¤©</option>
            <option value="all">å…¨éƒ¨æ—¥æœŸ</option>
          </select>
          <select id="mode">
            <option value="">å…¨éƒ¨æ¨¡å¼</option>
            <option value="door">é€è´§ä¸Šé—¨</option>
            <option value="pickup">å›¢é•¿è‡ªæ</option>
          </select>
          <button class="btn" id="btnApply">åº”ç”¨ç­›é€‰</button>
        </div>

        <div class="metaRow">
          <div style="display:flex; gap:8px; flex-wrap: wrap; align-items:center;">
            <span class="pill info" id="pillApi">API: <span id="apiUsed">æœªé€‰æ‹©</span></span>
            <span class="pill" id="pillCount">è®¢å•æ•°ï¼š<b id="count">0</b></span>
            <span class="pill" id="pillTime">æ›´æ–°æ—¶é—´ï¼š<span id="updatedAt">-</span></span>
          </div>
          <div class="muted" id="debugHint"></div>
        </div>
      </div>

      <div class="grid" id="list">
        <!-- cards -->
      </div>

      <div class="toast" id="toast"></div>
    </div>

    <script src="/driver/assets/js/driver_fetch.js?v=1"></script>
    <script src="/driver/assets/js/driver_orders.js?v=1"></script>
  </body>
</html>
